<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
   layout:decorate="~{layout/layout}">   
<head>
<meta charset="UTF-8">
<title>발주 등록</title>
</head>
<body>
<div layout:fragment="content" class="page-content">
   <div id="content">
      <h3>발주등록</h3>
      &nbsp;
      <table class="mb-5">
      <tr>
         <td style="display: center;"> 부서 <input id="clice" type="text"> <i class="bi bi-search" id="emplist" data-bs-toggle="modal" data-bs-target="#staticBackdrop" style="cursor:pointer"> </i> <input id="clice" type="text"> 사원 <input type="text"> <input type="text"></td>         
      </tr>
      <tr>
         <td style="display: center;"> 발주기간 <input type="date"> ~ <input type="date"></td>
      </tr>
      </table>
   </div>
   
   
   <!-- Modal -->
			<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static"
				data-bs-keyboard="false" tabindex="-1"
				aria-labelledby="staticBackdropLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h1 class="modal-title fs-5" id="staticBackdropLabel">사원 목록</h1>
							<button type="button" class="btn-close" data-bs-dismiss="modal"
								aria-label="Close"></button>
						</div>
						<div class="modal-body">
							<div id="modalGrid"></div>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-bs-dismiss="modal">확인</button>
						</div>
					</div>
				</div>
			</div>
   <script>
      
   </script>
   
   <div style="margin-left: 3px;">
              
               <button type="button" style="width: 80px; background-color: black; color:white; float:right;  margin:5px; margin-right: 30px">수정</button>   
               <button type="button" style="width: 80px; background-color: black; color:white; float:right;  margin:5px;">취소</button>    
               <button type="button" style="width: 80px; background-color: black; color:white; float:right; margin:5px;" onclick="insert()">등록</button>
         </div>
   <div id="grid"></div>   
   <div id="grid2"></div>
   <script>
   
   $(document).ready(function() {
      $('#SelectInfo').click(empList)
   })
   
   function empList() {
      $.ajax({
         url : 'ajax/dept',
         type : 'GET',
         dataType : 'text',
         success : function(data) {
        	$('emplist').innertext(data); 
            console.log(data);
         },
         error : function(rejcet) {
            console.log(no);
         }
      })
   }
   
   const gridData = [
          {
             name:'',
             artist:'',
             type:'',
             position : "bottom",
             release:'',
             genre:''
          }];
      const grid = new tui.Grid({
          el: document.getElementById('grid'),
         
          scrollX: false,
          scrollY: false,
          position : "bottom",
          rowHeaders : ['checkbox'],
          columns: [
            {
             
              header: '발주번호',
              name: '발주번호'
            },
            {
              header: '발주일자',
              name: '발주일자'
            },
            {
              header: '거래처',
              name: '거래처'
            },
            {
              header: '담당자',
              name: '담당자'
            },
            {
              header: '비고',
              name: '비고'
            }
          ]
        });
      
   
  const grid2 = new tui.Grid({
    el: document.getElementById('grid2'),
    data: gridData,
    scrollX: false,
    scrollY: false,
    rowHeaders : ['checkbox'],
    columns: [
      {
        header: 'NO',
        name: 'NO'
      },
      {
        header: '품번',
        name: '품번'
      },
      {
        header: '품명',
        name: '품명'
      },
      {
        header: '규격',
        name: '규격'
      },
      {
        header: '단위',
        name: '단위'
      },
      {
        header: '납기일',
        name: '납기일'
        },
        {
        header: '입고예정일',
        name: '입고예정일'
          },
          {
        header: '발주수량',
        name: '발주수량'
            },
            {
        header: '단가',
        name: '단가'
            },
            {
        header: '공급가',
        name: '공급가'
            }
    ]
  });

       grid.on('check', ev => {
         console.log('check!', ev);
       });

       grid.on('uncheck', ev => {
         console.log('uncheck!', ev);
       });

       grid.on('focusChange', ev => {
         console.log('change focused cell!', ev);
       });
       
       var modalGrid = new tui.Grid({
    	      el: document.getElementById('modalGrid'),
    	      bodyHeight: 200,
    	      data: [{
    	         planCode: '',
    	         planName: '',
    	         planDCode: '',
    	         productName: ''
    	      }],
    	      scrollX: true,
    	      scrollY: true,
    	      columns: [
    	         {
    	            header: '부서',
    	            name: 'empTal',
    	         },
    	         {
    	            header: '사원',
    	            name: 'empName',
    	         }
    	      ]
    	   });
       
       staticBackdrop.addEventListener('shown.bs.modal', () => {
       	modalGrid.refreshLayout(); //모달창 새로고침
       })
      
       function insert(){
    	   
       data = [
    	   {"발주번호":"번호"}
    	   
       ]
       grid.appendRows(data);
       $('#clice').val()
       console.log(123)
       }
   </script>
   </div>
</body>
</html>