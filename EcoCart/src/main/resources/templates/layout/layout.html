<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>다들 힘내자!!홧팅</title>
	<link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
	<script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>


<!-- jquery -->
	<script	src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
	
	<!--bootstrap  -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link rel="stylesheet" href="../assets/css/bootstrap.css">
	<link rel="stylesheet" href="../assets/css/app.css">
		<!-- font -->
	<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">
	
		<!--scrollbar -->
	<link rel="stylesheet"	href="../assets/vendors/perfect-scrollbar/perfect-scrollbar.css">
		<!-- icons -->
	<link rel="stylesheet" href="../assets/vendors/iconly/bold.css">
	<link rel="stylesheet"	href="../assets/vendors/bootstrap-icons/bootstrap-icons.css">
	<link rel="shortcut icon" href="../assets/images/favicon.svg"	type="image/x-icon">
	<link rel="stylesheet"   href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">

	<!--toast   -->
		<!-- grid  -->
		<!-- pagination -->
	<link rel="stylesheet" href="https://uicdn.toast.com/tui.pagination/latest/tui-pagination.css" />
	<script type="text/javascript" src="https://uicdn.toast.com/tui.pagination/v3.4.0/tui-pagination.js"></script>
		<!-- date-picker  -->
	<link rel="stylesheet" href="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.css" />
	<script src="https://uicdn.toast.com/tui.date-picker/latest/tui-date-picker.js"></script>		
		<!-- toastui-select-box -->
	 <link rel="stylesheet" href="https://uicdn.toast.com/select-box/latest/toastui-select-box.css" />
	<script src="https://uicdn.toast.com/select-box/latest/toastui-select-box.js"></script>
	
	<link rel="stylesheet"	href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
	<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
	
	<link rel="stylesheet"	href="../assets/vendors/toast/tui-grid.css" />
	<script src="../assets/vendors/toast/tui-grid.js"></script>
	
	<!-- chart -->
	<link rel="stylesheet" href="https://uicdn.toast.com/chart/latest/toastui-chart.min.css" />
<script src="https://uicdn.toast.com/chart/latest/toastui-chart.min.js"></script>
	
	<!-- SweetAlert2 -->
     <script src="../assets/vendors/sweetalert2/sweetalert2.all.min.js"></script>
     <link rel="stylesheet" href="../assets/vendors/sweetalert2/sweetalert2.min.css"/>
	
	<!-- 다음 주소 api -->
	<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>


	<!-- custom  -->
	<link rel="stylesheet" href="../assets/css/customCSS.css" />
	<script src="../assets/js/customJS.js"></script>
	
	<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
	<style type="text/css">
		#ddt{
       
			background-image: url("../../assets/images/bg/maineco.png");
		background-size : 1370px 300px;
        background-repeat : no-repeat;
        opacity: 0.5
		}
	</style>
</head>

<body>
	<div id="app"></div>
		<div id="sidebar" class="active">
			<div class="sidebar-wrapper active">
				<div class="sidebar-header">
				
					<div class="d-flex justify-content-between">
						<div class="logo">
							<a href="/">
<!-- --------------------------sec------------------- -->			
<div sec:authorize="isAuthenticated()" style="margin-bottom: -40px">
	<svg style="width: 100px" class="svg-inline--fa fa-plus fa-w-14 fa-fw select-all" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 680 512" data-fa-i2svg=""><path fill="currentColor" d="M512.9 192c-14.9-.1-29.1 2.3-42.4 6.9L437.6 144H520c13.3 0 24-10.7 24-24V88c0-13.3-10.7-24-24-24h-45.3c-6.8 0-13.3 2.9-17.8 7.9l-37.5 41.7-22.8-38C392.2 68.4 384.4 64 376 64h-80c-8.8 0-16 7.2-16 16v16c0 8.8 7.2 16 16 16h66.4l19.2 32H227.9c-17.7-23.1-44.9-40-99.9-40H72.5C59 104 47.7 115 48 128.5c.2 13 10.9 23.5 24 23.5h56c24.5 0 38.7 10.9 47.8 24.8l-11.3 20.5c-13-3.9-26.9-5.7-41.3-5.2C55.9 194.5 1.6 249.6 0 317c-1.6 72.1 56.3 131 128 131 59.6 0 109.7-40.8 124-96h84.2c13.7 0 24.6-11.4 24-25.1-2.1-47.1 17.5-93.7 56.2-125l12.5 20.8c-27.6 23.7-45.1 58.9-44.8 98.2.5 69.6 57.2 126.5 126.8 127.1 71.6.7 129.8-57.5 129.2-129.1-.7-69.6-57.6-126.4-127.2-126.9zM128 400c-44.1 0-80-35.9-80-80s35.9-80 80-80c4.2 0 8.4.3 12.5 1L99 316.4c-8.8 16 2.8 35.6 21 35.6h81.3c-12.4 28.2-40.6 48-73.3 48zm463.9-75.6c-2.2 40.6-35 73.4-75.5 75.5-46.1 2.5-84.4-34.3-84.4-79.9 0-21.4 8.4-40.8 22.1-55.1l49.4 82.4c4.5 7.6 14.4 10 22 5.5l13.7-8.2c7.6-4.5 10-14.4 5.5-22l-48.6-80.9c5.2-1.1 10.5-1.6 15.9-1.6 45.6-.1 82.3 38.2 79.9 84.3z"></path></svg>ECC<br>
		사번 : <span sec:authentication="name"></span><br>
		이름 : <span th:text="${session.infos.empName}"></span><br>
		부서 : <span th:text="${session.infos.empDept}"></span><br>
		<form action="logout" method="post">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
			<button class=" btn  btn-secondary" style="margin-left: 150px">로그아웃</button>
		</form>
	</div> 
 <!-- --------------------sec end-------------------- -->			
	</a>
							</div>
						<div class="toggler">
							<a href="#" class="sidebar-hide d-xl-none d-block"><i
								class="bi bi-x bi-middle"></i></a>
						</div>
					</div>
				</div>
				<div class="sidebar-menu">
					<ul class="menu">
						<li class="sidebar-item active "><a href="/"
							class='sidebar-link'> <i class="bi bi-grid-fill"></i> <span>go
									main</span>
						</a></li>
					</ul>
					<ul class="menu">
						<li class="sidebar-title">기초관리</li>



						

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-collection-fill"></i> <span>기초관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="/empList">사원관리</a>
								</li>
								<li class="submenu-item "><a href="/coCode">공통코드</a></li>
								<li class="submenu-item "><a href=/client>거래처등록</a></li>
							</ul></li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-grid-1x2-fill"></i> <span>물품관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="product">물품등록</a></li>
								<li class="submenu-item "><a
									href="wareHouse">창고등록</a></li>
								<li class="submenu-item "><a href="bom">BOM등록</a></li>
							</ul></li>

						<li class="sidebar-title">영업관리</li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i
								class="bi bi-file-earmark-spreadsheet-fill"></i> <span>주문관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="/estimate">견적</a></li>
								<li class="submenu-item "><a href="/order">주문</a></li>
								<li class="submenu-item "><a href="/orderCan">주문마감</a></li>
							</ul></li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-box-fill"></i> <span>출고관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="deliveryQ">출고요청</a></li>
								<li class="submenu-item "><a href="deliveryG">출고등록</a></li>
								<li class="submenu-item "><a href="deliveryInfo">배송정보</a></li>
								<li class="submenu-item "><a href="proBom">완제품 재고조회</a></li>
							</ul></li>

						<li class="sidebar-title">자재</li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-pentagon-fill"></i> <span>자재발주관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="materialinsert">발주등록</a></li>
								<li class="submenu-item "><a href="materialList">발주현황</a></li>
								
							</ul></li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-bar-chart-fill"></i> <span>자재입출고관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="WearingList">입고관리</a></li>
								<li class="submenu-item "><a href="releaseList">출고현황</a></li>
							</ul></li>


						<li class="sidebar-item  "><a href="receivingList" class='sidebar-link'>
							<i class="bi bi-hammer"></i><span>자재재고조회</span>
						</a></li>
					
					

						<li class="sidebar-title ">생산관리</li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-chat-right-text-fill"></i>
								<span>생산계획관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="mfPlanManage">생산계획관리</a></li>
								<li class="submenu-item "><a href="mfPlanList">생산계획조회</a></li>
							</ul></li>

						<li class="sidebar-item  has-sub"><a href="#"
							class='sidebar-link'> <i class="bi bi-calendar3-week-fill"></i>
								<span>생산지시관리</span>
						</a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="mfOrderRegist">생산지시등록</a></li>
								<li class="submenu-item "><a href="mfOrderDecide">생산지시확정</a></li>
								<li class="submenu-item "><a href="mfOrderList">생산지시현황</a></li>
							</ul></li>

						<li class="sidebar-item  "><a href="mfMaking" class='sidebar-link'>
							<i class="bi bi-hammer"></i><span>생산관리</span>
						</a></li>

						<li class="sidebar-item  has-sub"><a href="#" class='sidebar-link'>
							<i class="bi bi-gear-fill"></i><span>생산공정</span></a>
							<ul class="submenu ">
								<li class="submenu-item "><a href="mfResult">공정실적조회</a></li>
								<li class="submenu-item "><a href="mfProcess">생산공정관리</a></li>
							</ul>
						</li>
						
						<li class="sidebar-title ">설비관리</li>
						
						<li class="sidebar-item  "><a href="/facilities" class='sidebar-link'>
							<i class="bi bi-wrench"></i><span>설비관리</span>
						</a></li>
						
					</ul>
				</div>
				<button class="sidebar-toggler btn x">
					<i data-feather="x"></i>
				</button>
			</div>
		</div>

		<div id="main" >
			<header class="mb-3">
				<a href="#" class="burger-btn d-block d-xl-none"> <i
					class="bi bi-justify fs-3"></i>
				</a>
			</header>

			<div class="page-heading" layout:fragment="header">
				
			</div>
			<div layout:fragment="content" class="page-content">
				<div id="ddt" class="card" style="width: 1370px; height:120px; ">
				
				</div>
			<div class="row">
				<div class=" col-lg-6 card " style="margin-left:30px; height:490px">
				<div class="mt-1">주문현황</div>
					<div class="row">
						
						<button class="col-lg-2 btn btn-primary" onclick="location.href='/mfPlanManage';" style="width: 70px; height: 35px; margin-left: 10px; margin-top: 13px">생산</button>
						
						<div class="flex-right mt-4 col-lg-10">
							<div class="filters" style="height:35px">
								<label for="planStatus" style="width:100px">진행구분</label>
								<label><input type="radio" id="planAll"  name="plan"value="all" >전체</label>&nbsp;
								<label><input type="radio" id="planStart"  name="plan" value="start" checked="checked">진행</label>&nbsp;
								<label><input type="radio" id="planWait"  name="plan" value="wait">마감</label>
								<label><input type="radio" id="planEnd"  name="plan" value="wait">완료</label>
							</div>
						</div>	
					</div>				
					<div id="orderList"></div>
					
				</div>
				<div class=" col-lg-5 card " style="margin-left:50px; height:490px">
					<div id="mfResultGridId"></div>
				</div>
			</div>
			<footer>
				<div class="footer clearfix mb-0 text-muted">
					<div class="float-start">
						<p>2022 &copy; ours</p>
					</div>
					<div class="float-end">
						<p>
							Crafted with <span class="text-danger"><i
								class="bi bi-heart"></i></span> by <a
								href="https://www.daeguoracle.com/homeMain/homepageMain">우리조홧팅</a>
						</p>
					</div>
				</div>
			</footer>
			<script type="text/javascript">
		
			
			const data = {
					  categories: ['1분기', '2분기',  '3분기',  '4분기'],
					  series: [
					    {
					      name: '전기바이크01',
					      data: [5000, 3000, 5000, 7000, 6000, 4000, 1000]
					    },
					    {
					      name: '전기바이크02',
					      data: [8000, 4000, 7000, 2000, 6000, 3000, 5000]
					    },
					    {
					      name: '전기바이크03',
					      data: [4000, 4000, 6000, 3000, 4000, 5000, 7000]
					    },
					    {
					      name: '전기바이크04',
					      data: [3000, 4000, 3000, 1000, 2000, 4000, 3000]
					    }
					  ]
					}
		      const options = {
			        chart: { title: '연출고량', width: 570, height: 500 },
			        xAxis: { pointOnColumn: false, title: { text: '분기' } },
			        yAxis: { title: '판매량' },
			      };

			const chart = toastui.Chart.columnChart({el:document.getElementById('mfResultGridId'), data, options});
			
			const grid = new tui.Grid({
		        el: document.getElementById('orderList'), // Container element
		        scrollX: false,
		        scrollY: true,
	            bodyHeight : 350,
		        columns: [
		            {
		            	header: '주문코드',
		            	name: 'orderCode',
		            	filter : 'text'
		            },
		            {
		            	header: '거래처',
		            	name: 'clientName',
		            	filter : 'text'
		            },
		            {
		            	header: '주문등록일자',
		                name: 'orderDate',
		                filter : 'date'
		                
		             },
		             {
		             	header: '납기일자',
		                name: 'deDate',
		                filter : 'select'
		             },
		             {
		                 header: '총합계액',
		                 name: 'allSum',
		                 formatter : function (ev){
		                   	 console.log(ev)
		                 return ev.value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
		                    },
		                  align : 'right'
		                 
		             },
		             {
	               	  	header:'상태',
	               	  	name: 'orderSt',
	               	 	filter : 'text',
	               	 	align : 'center'
	                 }
		        ]
			});
			
			//
				$.ajax({
				url:'/listOrders',
				success : function(result) {
					grid.resetData(result);
					grid.filter('orderSt', [{code:'eq', value:'진행'}]);
				},
				error : function(error){
					console.log(error);
				}
			})
			// 조회버튼 / 리셋버튼
		 	planAll.addEventListener('click', () => {
		    	grid.unfilter('orderSt');
		    })
		    planEnd.addEventListener('click', () => {
		    	grid.filter('orderSt', [{code:'eq', value:'완료'}]);
		    })
		    planWait.addEventListener('click', () => {
		    	grid.filter('orderSt', [{code:'eq', value:'마감'}]);
		    })
		    planStart.addEventListener('click', () => {
		    	grid.filter('orderSt', [{code:'eq', value:'진행'}]);
		    })
			//
			
			var mfResultGrid = new tui.Grid({
			el: document.getElementById(''),
			scrollX: false,
			scrollY: false,
			bodyHeight: 200,
			rowHeaders: ['rowNum'],
			columns: [
		        {
		          header: '생산코드',
		          name: 'mfMakingCode'
		        },
		        {
		          header: '생산지시코드',
		          name: 'mfOrderCode'
		        },
		        {
		          header: '라인번호',
		          name: 'lineNo'
		        },
		        {
		          header: '총투입량',
		          name: 'inputNum'
		        },
		        {
		          header: '총생산량',
		          name: 'makingNum'
		        },
		        {
		          header: '총불량량',
		          name: 'faultyNum'
		        },
		        
		        {
		          header: '생산일자',
		          name: 'mfOrderDate',
		          filter: 'date'
		        }
			]
		});
		$.ajax({
    		url:'/mfResultListAll',
    		success:function(data){
    			mfResultGrid.resetData(data);
    		},
    		error:function(error){
    			console.log(error);
    		}
    	})
			</script>
		</div>
	</div>
	<script
		src="../assets/vendors/perfect-scrollbar/perfect-scrollbar.min.js"></script>
	<script src="../assets/js/bootstrap.bundle.min.js"></script>

	<script src="../assets/js/main.js"></script>
</body>

</html>
