<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/layout}">

<head>
   <meta charset="UTF-8">
   <title>deliveryInfo 배송정보</title>
	<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
	<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
	 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
	 <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	
</head>

<body>
<div layout:fragment="header" class="page-heading"><h2>출고정보</h2></div>
	<div layout:fragment="content" class="page-content">
				
		<div class="mb-1">
				
			<div style="height:50px;">
				<label for="planName" style="width:100px">출고처리코드</label>
				<input type="text" class="form-control" style="width:200px; display:inline" placeholder="출고처리코드" id="CodeSearch">&nbsp;
			</div>
			
            <div style="height:50px;">
				<label for="planName" style="width:100px">출고처리일자</label>
				<input type="date" class="form-control" style="width:200px; display:inline" id="DateSearch">&nbsp;
			
           </div>
           
			<div style="height:50px;">
				<label for="planName" style="width:100px">거래처</label>
				<input type="text" class="form-control"style="width:200px; display:inline" placeholder="거래처명" id="ClientSearch">&nbsp;
            </div>
            
            <div style="height:50px;">
				<label for="planName" style="width:100px">출고방법</label>
				<input type="text" class="form-control"style="width:200px; display:inline" placeholder="출고방법" id="MthSearch">&nbsp;
				<button type="button" class="btn btn-sm btn-primary" id="Searchbtn">검색</button>&nbsp;
				<button type="button" class="btn btn-sm btn-secondary" id="Resetbtn">초기화</button>
            </div>
            
            <div>
            	<button type="button" class="btn btn-sm btn-primary" style="float:right; margin:5px; margin-right: 30px"
		               data-bs-toggle="modal" data-bs-target="#staticBackdrop">정보 등록</button>   
            </div>
			
          </div>     
        
	        <div id="grid"></div>
	        
        
        
        <!--  출고정보 등록모달창  -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg">  
		    <div class="modal-content">
		    
		      <div class="modal-header">
		        <h5 class="modal-title" id="staticBackdropLabel">배송 정보 등록</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      
		      
		      <div class="modal-body">
				  <div class="container-fluid">
				  		<div style="margin-bottom:5px">
							<label for="row1" style="width:100px; height: 30px; text-align:center;">출고처리코드</label>
								<select name="no" onchange="handleOnChange8(this)" class="btn" style="width:135px; border:1px solid #dce7f1; background-color:white">
				         			<option value="선택">----선 택----</option>
					         		<th:block th:each="e : ${deliveryPro}">
					         			<option th:value="${e.dlivyProCode}" th:text="${e.dlivyProCode}"></option>
				         			</th:block>  			
				         		</select>
							
				  		</div>

						<div style="margin-bottom:5px">
							<label for="row2" style="width:100px; height: 30px; text-align:center; " >출고 방법 </label>
				         		<select id="select8" name="no"  onchange="handleOnChange8(this)" class="btn" style="width:135px; border:1px solid #dce7f1; background-color:white">
				         			<option value="선택">----선 택----</option>
				         			<option value="차량">    차 량    </option>
				         			<option value="선박">    선 박    </option>
				         			<option value="비행기">    비행기    </option>
				         		</select>
				         		
						</div>	
				   		
				   		<div style="margin-bottom:5px; margin-top:5px;">
				   			<label for="row3" style="width:100px; height: 30px; text-align:center; " >운송코드</label>
				         		<input type="text" class="form-control form-control-sm" style="width:135px; display:inline">

				   			<label for="row3" style="width:100px; height: 30px; text-align:center;" >출고기사</label>
				         		<input type="text" class="form-control form-control-sm" style="width:135px; display:inline">
						         		
				         	<label for="row3" style="width:100px; height: 30px; text-align:center;" >기사연락처</label>	
				         		<input type="text" class="form-control form-control-sm" style="width:135px; display:inline" >
				         
				        </div>	
				         	
				   	  <div class="modal-footer">
					        <button type="button" class="btn btn-primary">배송정보 등록</button>
					        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
				      </div>
				         	
				</div>
			</div>  
		     
			
						
		      
		    </div>
		  </div>
		</div>
	    
	    <!--  모달창 끝 -->
	    
	    
      
      
      
      <script>
	      const Grid = tui.Grid;
			
			 
			const grid = new Grid({
		        el: document.getElementById('grid'), // Container element
		        scrollX: false,
	            scrollY: false,
		        columns: [
		            {
		            	header: '출고처리코드',
		            	name: 'dlivyProCode',
		            	filter : 'text'
		            },
		            {
		            	header: '출고처리일자',
		            	name: 'dlivyDate',
		            	filter : 'date'
		            },
		            {
		            	header: '거래처',
		                name : 'clientCode',
		                filter : 'text'
		             },
		             {
		             	header: '출고방법',
		                name: 'dlivyMth',
		                filter : 'text'
		             },
		             {
				         header: '운송코드',
				         name: 'dlivyCode'
		             },
		             {
				         header: '출고기사',
				         name: 'dlivyName'
		             },
		             {
				         header: '기사연락처',
				         name: 'dlivyPnum'
				         
				     }
				     
			            
			            
		            
		        ]
			});
			
			
			
			Grid.applyTheme('striped'); // Call API of static method
      
      
			

      
      
      
      
			//모달창
		   	staticBackdrop.addEventListener('shown.bs.modal', () => {
		   	      grid.refreshLayout(); //모달창 새로고침
		   	 })
      
      
			
			
      
      	
	      function handleOnChange(e){
				//선택된 데이터의 텍스트값 가져오기
				const text = e.value;
				
				//선택한 텍스트 출력
				document.getElementById('result').value = text;
			}
			
			
		function handleOnChange2(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result2').value = text;
		}
		
		
		function handleOnChange3(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result3').value = text;
		}
		
		function handleOnChange4(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result4').value = text;
		}
		
		function handleOnChange5(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result5').value = text;
		}
		
		function handleOnChange6(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result6').value = text;
		}
		
		function handleOnChange7(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result7').value = text;
		}
		
		function handleOnChange8(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result8').value = text;
		}
		
		function handleOnChange9(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result9').value = text;
		}
		
		function handleOnChange10(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result10').value = text;
		}
		
		
		document.addEventListener("DOMContentLoaded", DeliveryList)
		
		function DeliveryList(){
			$.ajax({
				url:'/listDeliveryProInfo',
				success : function(result) {
					console.log(result);
					grid.resetData(result);
				},
				error : function(error){
					console.log(error);
				}
			})
			
     	}
		
		Searchbtn.addEventListener('click', () => {
			grid.filter('dlivyProCode' , [{code:'contain', value:$('#CodeSearch').val()}])
			grid.filter('clientCode' , [{code:'contain', value:$('#ClientSearch').val()}])
			grid.filter('dlivyMth' , [{code:'contain', value:$('#MthSearch').val()}])
			
			if($('#DateSearch').val() != '' ){
				grid.filter('dlivyDate' , [{code:'beforeEq', value:$('#DateSearch').val()}])
				
			}
		});

			
		Resetbtn.addEventListener('click', () => {
			document.getElementById('CodeSearch').value = '';
			grid.unfilter('dlivyQCode');
			document.getElementById('ClientSearch').value = '';
			grid.unfilter('clientCode');
			document.getElementById('MthSearch').value = '';
			grid.unfilter('dlivyMth');
			document.getElementById('DateSearch').value = '';
			grid.unfilter('dlivyDate');
		})	 
	      
	      
		
      
      
      </script>
      </div>
</body>
</html>