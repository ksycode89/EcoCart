<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
		xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
   		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
   <meta charset="UTF-8">
   <title>Order</title>
	 <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://uicdn.toast.com/grid/latest/tui-grid.css" />
	<script src="https://uicdn.toast.com/grid/latest/tui-grid.js"></script>
	 <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
	
</head>

<body>
	<h4>주문</h4>
	
	<div class="row">
		<table style="margin:30px;">
			<tr>
				<td>견적코드<input style="width: 100px;" id="result">&nbsp; <i class="bi bi-search">&nbsp;</i>
         		<select name="no" onchange="handleOnChange(this)" style="width: 80px;">
         			<option value="번호1">번호1</option>
         			<option value="번호2">번호2</option>
         			<option value="번호3">번호3</option>   			
         		</select>
         		
         		 <button type="button" style="width: 80px; background-color: black; color:white;  margin-left:20px;"
                  data-bs-toggle="modal" data-bs-target="#staticBackdrop">조 회</button>
         		</td>
         	</tr>
         	<tr>	
				<td>주문코드<input style="width: 100px;" id="result2">&nbsp; <i class="bi bi-search">&nbsp;</i>
         		<select name="no" onchange="handleOnChange2(this)" style="width: 80px;">
         			<option value="번호1">번호1</option>
         			<option value="번호2">번호2</option>
         			<option value="번호3">번호3</option>   			
         		</select>
         		
         		 <button type="button" style="width: 80px; background-color: black; color:white;  margin-left:20px;">조 회</button>
         		</td>
         		
			</tr>
		</table>	
	</div>
	
	
	<div id="grid">
	
	</div>
	
	<div id="grid2">
	
	</div>
	
	<div class="row">
		<table style="margin:30px;">
			<tr>
				<td>제품코드<input style="width: 100px;" id="result3">&nbsp; <i class="bi bi-search">&nbsp;</i>
         		<select name="no" onchange="handleOnChange3(this)" style="width: 80px;">
         			<option value="번호1">번호1</option>
         			<option value="번호2">번호2</option>
         			<option value="번호3">번호3</option>   			
         		</select>
         		
         		 <button type="button" style="width: 80px; background-color: black; color:white;  margin-left:20px;">조 회</button>
         		</td>
         		
			</tr>
		</table>	
	</div>
	
	
	<div id="grid3">
	
	</div>
	
	
	
	
	
	
	<!--  견적코드 모달창  -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="staticBackdropLabel">견적서</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		        
		        <div class="modal-body">
				  <div class="container-fluid">
				    <div class="row">
				      <div class="col-sm-9">

				        Level 1: .col-sm-9
				        
				      </div>
				    </div>
				  </div>
				</div>
		        
		        

		        
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-primary">주문 등록</button>
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
		      </div>
		    </div>
		  </div>
		</div>
	    
	    <!--  모달창 끝 -->
	    
	   
	    
	    
	    <!--  제품코드 모달창  -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
		  <div class="modal-dialog modal-lg">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="staticBackdropLabel">제품코드</h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		        
		        <div class="modal-body">
				  <div class="container-fluid">
				    
				    <div id="grid">
				    </div>
				    
				  </div>
				</div>
		        
		        

		        
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-primary">주문 등록</button>
		        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
		      </div>
		    </div>
		  </div>
		</div>
	    
	    <!--  모달창 끝 -->
	
		
	
	
	
	<script>
	
		const Grid = tui.Grid;
		
		//주문목록 
		const grid = new Grid({
	        el: document.getElementById('grid'), // Container element
	        columns: [
	            {
	            	header: '주문코드',
	            	name: 'orderCode'
	            },
	            {
	            	header: '거래처',
	            	name: 'clientCode'
	            },
	            {
	            	header: '주문등록일자',
	                name: 'orderDate'
	             },
	             {
	             	header: '납기일자',
	                name: 'deDate'
	             }
	            
	        ],
	        data: [
	            {
	            	orderCode: 'Or01',
	            	clientCode: 'Ci01',
	            	orderDate: '2022-11-14',
	            	deDate : '2022-01-08',
	             
	    
	              
	                
	            }
			]
		});
		
		Grid.applyTheme('striped'); // Call API of static method
	
		
		
		
		//제품코드 
		const grid2 = new Grid({
	        el: document.getElementById('grid2'), // Container element
	        columns: [
	            {
	            	header:'no',
	            	name:'orderDno'
	            },
	        	{
	            	header: '제품코드',
	            	name: 'proCode'
	            },
	            {
	            	header: '제품명',
	                name: 'proName'
	             },
	             {
	             	header: '수량',
	                name: 'sellNum'
	             },
	             {
	              	header: '단가',
	                 name: 'sellPrice'
	              },
	             
	             {
	              	header: '합계액',
	                 name: 'sumPrice'
	              }
	              
	        ],
	        data: [
	            { 
	            	
	            	orderDno: '01',
	            	proCode: 'pro01',
	            	proName: '헤드',
	            	sellNum : '5',
	            	sellPrice : '4000',
	            	sumPrice : this.sellNum
	              
	                
	            }
			]
		});
	
		
		const grid3 = new Grid({
	        el: document.getElementById('grid3'), // Container element
	        columns: [
	        	{
	            	header: '제품코드',
	            	name: 'proCode'
	            },
	            {
	            	header: '제품명',
	                name: 'proName'
	             },
	             {
	             	header: '제품재고수량',
	                name: 'proNum'
	             }
	              
	        ],
	        data: [
	            { 
	      
	            	proCode: 'pro01',
	            	proName: '2022-11-14',
	            	proNum : '5'
	            }
			]
		});
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		function handleOnChange(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result').value = text;
		}
		
		function handleOnChange2(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result2').value = text;
		}
	
		function handleOnChange3(e){
			//선택된 데이터의 텍스트값 가져오기
			const text = e.value;
			
			//선택한 텍스트 출력
			document.getElementById('result3').value = text;
		}
	
		
		
		
		//수량 * 단가 = 합계액
		function add(){
			if(document.getElementById("sellNum").value && document.getElementById("sellPrice").value){
				
			}
				  document.getElementById('sumPrice').value =
					  parseInt(document.getElementById('sellNum').value) * parseInt(document.getElementById('sellPrice').value);
		}
		
		
		
		
		//모달창
		var myModal = document.getElementById('myModal')
			var myInput = document.getElementById('myInput')

			myModal.addEventListener('shown.bs.modal', function () {
			  grid3.refreshLayout();
			  myInput.focus()
			})
			
			
			
			
			
			
	</script>
	
	
	
	
</body>
</html>